# Strip vs Print Contract

## Purpose

Photobooth produces two distinct image artifacts:

- **Strip**: a tall, slender digital photostrip composed of **3 photos plus a logo**. The strip is the
  canonical session asset for UI display, download, archival, and future reprints.
- **Print**: a print-optimized composite image containing **two strips side by side**, plus
  **print-only text**. The print is the canonical asset sent to the physical printer and is tailored
  to the printer/cut workflow.

**Key principle:** Strip generation is **not** coupled to printer constraints. Print generation may add
padding/rotation/text required for correct physical output, without changing the strip.

## Terminology

- **Photo**: one captured camera image for the current session (horizontal, original camera aspect ratio).
- **Logo**: a session-specific logo image (may include event branding and/or session code), treated as an
  image tile in the strip.
- **Tile**: one slot in the strip (a photo tile or logo tile). Tiles are rendered by scaling source imagery
  to fit the tile **without cropping** (aspect ratio preserved). Any leftover area is filled with the
  strip background color (letterboxing/pillarboxing).
- **Padding**: solid background border around tiles and between tiles.
- **Print-only text**: marketing/instructional text present only on the print artifact.

## Strip Contract

### Inputs

- Exactly **3** source photos for the session.
- Exactly **1** logo image for the session (session-personalized).
- Strip layout configuration (sizes, padding, background color).

### Output

- A single strip image file (session-scoped), intended for UI display and download.

### Invariants

- Always **4 tiles** total: 3 photo tiles + 1 logo tile.
- **No cropping** and **no distortion** of camera photos when fitting them into tiles:
    - Photos are uniformly scaled to fit within the tile while preserving aspect ratio.
    - Any remaining tile area is filled with the strip background color.
- Strip output is deterministic given inputs.
- Strip contains **no print-only text**.

### Strip Sizing Assumptions (Locked)

- **Strip size:** `600 × 1596` pixels
- **Tile content size:** `576 × 384` pixels (3:2 aspect ratio)
- **Padding:** `12` pixels
    - Left/right padding around tile content: 12px
    - Padding at top of strip: 12px
    - Padding between tiles: 12px
    - Padding at bottom of strip: 12px

Derived height check:

- Tiles: `384 × 4 = 1536`
- Padding slots: `12 × 5 = 60`
- Total: `1536 + 60 = 1596`

## Print Contract

### Inputs

- A strip image (as generated by the Strip Contract) **or** the same underlying session inputs used to generate it.
- Print layout configuration (paper size, DPI, placement, print-only text configuration).

### Output

- A single print image file suitable for sending to the printer.

### Invariants

- Print is generated at **exact printer-target resolution** and includes **DPI metadata**.
- Print contains **two strips** side by side (identical for the session).
- Print may add padding and/or rotate the full print image for correct printing.
- Print-only text (if enabled) exists **only** on the print artifact.

### Print Sizing Assumptions (Locked for CP1500 Optimization)

- Canon Selphy postcard prints are treated as **4×6 inches at 300 DPI**.
- Print canvas is `1200 × 1800` pixels at **300 DPI**.
- Two strips of width 600px fit exactly across the print width: `600 + 600 = 1200`.

### Print-only Text Area (Locked)

- The strip pair is placed at the **top** of the print canvas (x=0 and x=600), with no additional padding inserted
  above.
- Remaining space below the strips: `1800 − 1596 = 204` pixels.
- Because the strip already includes a 12px bottom padding, the print-only content region is:
    - **Text content box:** `576 × 192` pixels
    - Width 576 aligns with strip tile content (not the outer 12px borders).
    - Height 192 accounts for a single 12px bottom margin, without adding a new top margin.

### Print-only Text Content

- Print-only text includes:
    - `Find your photos at saperstonestudios.com#album`
    - A session-specific album code (≈ 20 characters)
- The URL is expected to present a modal prompting for the code, then route to the session photos.

### Allowed Print Layout Adjustments (Explicit)

- Background color for print padding/text area is permitted (typically white).
- Text layout may use one or two lines; URL and code may be styled differently for readability.
- If printer/driver requires, the entire print image may be rotated before sending to CUPS, but the pixel canvas
  and DPI metadata must remain correct.